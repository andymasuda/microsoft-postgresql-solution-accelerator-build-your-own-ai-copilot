# 5.2 Implement the Chat Endpoint

TODO: Add steps for implementing the `/chat` endpoint in the API. This will be updated as they go, so start simple...

Have the users actually add the code (but libraries, such as LangChain should already be in place, added by the requirements.txt file)...

This endpoint should:

- Have RAG capablities (multi-agent or function calling...)
- Use LangChain (already included, so just cover the basics in descriptions)
- Show how to use LangChain's `StructuredTool` (or whatever it is) to call existing functions to get info from the database for RAG\

Next step is to refine the prompt to get better answers... (in next file)

## Review router...



## Create LangChain agents

TODO: Add code for creating LangChain agents for performing data lookups

TODO: LangChain implementation should already be done, so this will just be reviewing the code a

How does this compare to using function calls for a single agent? Is it just splitting that across agents, so they perform data lookups in parallel?

Need to consider token limits...


## 3.7. Let's Connect The Dots ðŸ’¡

!!! info "Recall that the [Retrieval Augmented Generation](https://learn.microsoft.com/en-us/azure/ai-studio/concepts/retrieval-augmented-generation#how-does-rag-work) works by *retrieving* relevant knowledge from your data stores, and _augmenting_ the user query with it to create an enhanced prompt - which _generates_ the final response."

To implement this RAG pattern, we need to execute three steps:

1. **Setup data sources** and populate them with our data (product catalog, customer orders)
1. **Create [indexes](https://learn.microsoft.com/azure/ai-studio/concepts/retrieval-augmented-generation#how-does-rag-work)** for efficient information retrieval by LLMs (e.g., find matching products)
1. **Connect our Azure AI project** to access data/indexes code-first, for use in processing steps.

In the previous section we setup the data sources (provisioning infra) and populated them with data (post-provisioning scripts) as follows:

1. **Azure CosmosDB** - loaded **12 records** from `data/customer_info`, got _customers_ database.
1. **Azure AI Search** - loaded **20 records** from `data/product_info`, got _contoso-products_ index.

This checks off the first two idents from our RAG checklist above. Now, let's see how we can achieve the thirst ep with a code-first approach that makes use of the Azure AI Search, Azure CosmosDB and Azure OpenAI services through their Azure SDKs.

---

!!! success "Congratulations! You have completed your setup and are ready to begin integrating AI into the solution."
