# 4.1 Extract Data with Document Intelligence

Azure Document Intelligence enables automated data extraction and processing from documents using AI. This section provides details on the AI-enhanced data ingestion and processing pipeline.

---

## Overview of Document Upload and Event-Driven Workflow

1. The process begins with financial documents, such as invoices and statements of work, uploaded to **Azure Blob Storage**. This event triggers downstream processing via **Azure Event Grid**.

- **Azure Blob Storage**: Cost-effective storage for incoming documents.
- **Azure Event Grid**: Detects document uploads and triggers processing workflows in real time.

1. When new documents are uploaded into blob storage, an **Event Grid trigger** is fired, starting the **Data Ingestion Worker Process**.

1. The **data ingestion worker process** handles data extraction and processing by sending uploaded documents to the **Azure AI Document Intelligence service**.

1. The solution uses pre-built AI models within **Document Intelligence** which analyze data fields, such as **project deliverables, due dates, billable amounts, and vendor details**. These models are designed for specific document types, such as invoices, contracts, receipts, and identity documents, and leverage AI-powered optical character recognition (OCR) and natural language processing (NLP) to extract relevant data.

1. Once the document is analyzed, the model:
    1. Extracts key fields and assigns confidence scores (e.g., "Invoice Total: $1,250.00 (Confidence: 0.98)").
    1. Processes tables and line items using structured JSON or key-value pairs.
    1. Recognizes relationships between extracted entities (e.g., linking an invoice number to its corresponding due date).

1. Document Intelligence's **Semantic Chunking** capability recognizes document structures, capturing headings and chunking the content body based on semantic coherence, such as paragraphs and sentences. This ensures that the chunks are of higher quality for use in **Retrieval-Augmented Generation (RAG)** pattern queries.

1. Once extracted, the document data is securely stored in **Azure Database for PostgreSQL flexible server**.

1. As part of the database insert statement, the **GenAI capabilities of the `azure_ai` extension** are leveraged to:
    - **Generate and save vector embeddings** of document text using **Azure OpenAI**, enabling efficient semantic search and retrieval.
    - **Create abstractive summaries** of Statements of Work (SOWs) using the **Azure AI Language service**, distilling key insights from lengthy documents into concise, actionable summaries.

---

### AI-Enhanced Data Ingestion and Validation

**Azure Document Intelligence** extracts structured and unstructured data while applying AI-driven validation to ensure accuracy.

**Automated Text Extraction**: Identifies key fields such as transaction amounts and customer details.
**AI-Driven Data Validation**: Cross-references extracted data with predefined rules to ensure compliance.
**Semantic Chunking**: Segments large documents into meaningful parts for efficient processing.

---

### Benefits of the Enhanced Pipeline

- **High-Quality Data**: AI-driven validation ensures accuracy.
- **Scalability**: Handles large document volumes efficiently.
- **Semantic Understanding**: Enables AI-powered search and analytics.
- **End-to-End Automation**: Streamlines document processing workflows.

By leveraging **Azure Document Intelligence**, unstructured documents can be transformed into actionable insights efficiently.
